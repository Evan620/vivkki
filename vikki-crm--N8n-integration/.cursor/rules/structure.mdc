---
alwaysApply: true
---
Response Format:
typescriptinterface DocumentGenerationResponse {
  success: boolean;
  pdf_base64?: string;
  filename?: string;
  error?: string;
  message?: string;
}
```

**Error Handling:**
- Network timeout: 30 seconds
- Retry logic: 2 attempts with 2-second delay
- Fallback: Show user-friendly error with option to retry
- Log all errors to work log for debugging

---

## 5. UI/UX REQUIREMENTS

### 5.1 Design Principles

1. **Progressive Disclosure:** Don't overwhelm user with options
2. **Clear Feedback:** Always show what's happening (loading, success, error)
3. **Forgiving:** Allow easy correction of mistakes
4. **Consistent:** Match existing Vikki CRM design patterns
5. **Mobile-First:** Touch-friendly on all screen sizes

---

### 5.2 Component Specifications

#### 5.2.1 Generate Documents Button (Overview Tab)

**Location:** Overview tab, Quick Actions section  

**Visual Design:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Quick Actions                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ ðŸ’¾ Add Note      â”‚  â”‚ ðŸ“„ Generate     â”‚â”‚
â”‚  â”‚                  â”‚  â”‚    Documents    â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**States:**
- **Default:** Blue-purple gradient, white text, shadow
- **Hover:** Lift effect, increased shadow, slight scale
- **Active/Pressed:** Slightly depressed
- **Disabled:** Gray, 50% opacity (not used - always enabled)

**Behavior:**
- Click â†’ Opens document selection modal
- Mobile: Min 44px tap target
- Keyboard: Tab focus with Enter to activate

---

#### 5.2.2 Document Selection Modal

**Visual Design:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Generate Document                              âœ•    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚  Select the document type you want to generate:     â”‚
â”‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ðŸ“  Letter of Representation               â”‚    â”‚
â”‚  â”‚     To Client's Insurance (1st Party)      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ðŸ“„  Letter of Representation               â”‚    â”‚
â”‚  â”‚     To Defendant's Insurance (3rd Party)   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ðŸ¥  HIPAA Medical Records Request          â”‚    â”‚
â”‚  â”‚     Authorization for Release of Records   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Specifications:**
- **Size:** 560px max width, auto height
- **Position:** Center screen with backdrop blur
- **Animation:** Slide up from bottom (mobile) or fade in (desktop)
- **Backdrop:** Black 60% opacity with blur
- **Padding:** 24px all sides
- **Border Radius:** 16px

**Card Buttons:**
- **Size:** Full width, 80px height
- **Border:** 2px solid, colored by type (blue/purple/green)
- **Hover:** Border color intensifies, background tint
- **Active:** Background fill with white text
- **Icon:** 48px emoji/icon, left aligned
- **Text:** Title bold 16px, subtitle regular 14px gray

**Behavior:**
- Click outside â†’ Close modal (with animation)
- ESC key â†’ Close modal
- Click X button â†’ Close modal
- Click document type â†’ Immediately start generation
- Mobile: Full screen on phones, card on tablets

---

#### 5.2.3 Loading State (During Generation)

**Visual Design:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Generating Document...                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚        â”‚  [Spinner Animation]           â”‚          â”‚
â”‚        â”‚                                 â”‚          â”‚
â”‚        â”‚  Generating Letter of          â”‚          â”‚
â”‚        â”‚  Representation - 3rd Party    â”‚          â”‚
â”‚        â”‚                                 â”‚          â”‚
â”‚        â”‚  Please wait...                â”‚          â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Specifications:**
- **Overlay:** Semi-transparent over modal
- **Spinner:** Animated circle, blue gradient, 40px
- **Text:** Document type being generated, subtitle "Please wait..."
- **Colors:** Blue gradient background, white text
- **Animation:** Smooth fade in, pulsing effect
- **No dismiss:** User cannot close during generation

**States:**
- **Single Document:** "Generating [Document Type]..."
- **Multiple Documents:** "Generating 3 documents... (2 of 3)"
- **Progress Bar:** Show for bulk operations (HIPAA)

---

#### 5.2.4 Success State

**Visual Design:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ“ Document Generated Successfully!                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚  3rd_party_lor_Case_11_2025-01-31.pdf              â”‚
â”‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ ðŸ“¥ Download      â”‚  â”‚ ðŸ“ View in       â”‚       â”‚
â”‚  â”‚                  â”‚  â”‚    Documents     â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                      â”‚
â”‚  The document has been saved to your Documents     â”‚
â”‚  tab and is ready to send.                         â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Specifications:**
- **Show Duration:** 3 seconds, then auto-close OR user dismisses
- **Toast Alternative:** For quick feedback, use toast notification
- **Actions:**
  - Download button â†’ Triggers browser download
  - View in Documents â†’ Navigates to Documents tab
  - Background click â†’ Dismisses modal
- **Auto Actions:**
  - PDF auto-downloads immediately
  - Document saved to database
  - Work log entry created
  - Modal closes after 3 seconds

---

#### 5.2.5 Error State

**Visual Design:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš  Cannot Generate Document                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚  Missing required information:                       â”‚
â”‚                                                      â”‚
â”‚  â€¢ Defendant's Insurance Company                    â”‚
â”‚  â€¢ Claim Number                                      â”‚
â”‚                                                      â”‚
â”‚  Please complete this information before            â”‚
â”‚  generating the document.                            â”‚
â”‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ Go to Insurance  â”‚  â”‚ Cancel           â”‚       â”‚
â”‚  â”‚ Tab              â”‚  â”‚                  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Specifications:**
- **Colors:** Orange/red warning theme
- **Icon:** Warning triangle
- **Message:** Clear explanation of what's wrong
- **Missing Fields:** Bulleted list of specific fields
- **Actions:**
  - "Go to [Tab]" button â†’ Switches to relevant tab and highlights field
  - "Cancel" â†’ Closes modal
- **Helpful:** Guides user to fix the problem

---

### 5.3 Medical Providers Tab Enhancement

#### 5.3.1 Bulk Selection Interface

**Visual Design:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Medical Providers                                           â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ðŸ“‹ Generate Records Request (3)         â”‚  â”‚ Add      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ Provider â”‚ â”‚
â”‚                                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚â˜‘ â”‚ Provider Name            â”‚ Service  â”‚ Billed  â”‚ ... â”‚â”‚
â”‚ â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤â”‚
â”‚ â”‚â˜‘ â”‚ OU Medical Center       â”‚ ER       â”‚ $6,845  â”‚ ... â”‚â”‚
â”‚ â”‚â˜ â”‚ Integris Health         â”‚ Primary  â”‚ $425    â”‚ ... â”‚â”‚
â”‚ â”‚â˜‘ â”‚ Excel Physical Therapy  â”‚ PT       â”‚ $5,280  â”‚ ... â”‚â”‚
â”‚ â”‚â˜‘ â”‚ Oklahoma Pain Physiciansâ”‚ Pain Mgt â”‚ $3,200  â”‚ ... â”‚â”‚
â”‚ â””â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Specifications:**

**Checkbox Column:**
- **Width:** 40px fixed
- **Checkbox Size:** 20px Ã— 20px
- **Header Checkbox:** "Select All" functionality
- **Mobile:** Larger 24px Ã— 24px checkboxes for touch
- **States:** 
  - Unchecked: Gray border
  - Checked: Blue fill with white checkmark
  - Indeterminate (some selected): Blue with dash

**Generate Button:**
- **Text:** "ðŸ“‹ Generate Records Request" (no count when 0 selected)
- **Text with Count:** "ðŸ“‹ Generate Records Request (3)" when providers selected
- **States:**
  - Disabled: Gray, 50% opacity when 0 selected
  - Enabled: Blue gradient when â‰¥1 selected
  - Hover: Lift effect
- **Position:** Top left, above table
- **Size:** Auto width with padding, 44px min height

**Selection Behavior:**
- Click checkbox â†’ Toggle selection
- Click row â†’ Does NOT toggle (prevents accidental selection)
- Header checkbox â†’ Select/deselect all visible providers
- Selected rows â†’ Subtle blue background tint
- Count updates in real-time in button

---

#### 5.3.2 Bulk Generation Confirmation Modal

**Visual Design:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Generate HIPAA Requests                        âœ•   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚  You are about to generate medical records          â”‚
â”‚  requests for 3 providers:                          â”‚
â”‚                                                      â”‚
â”‚  âœ“ OU Medical Center                                â”‚
â”‚    700 NE 13th Street, Oklahoma City, OK            â”‚
â”‚                                                      â”‚
â”‚  âœ“ Excel Physical Therapy                           â”‚
â”‚    5800 N. Classen Boulevard, Oklahoma City, OK     â”‚
â”‚                                                      â”‚
â”‚  âœ“ Oklahoma Pain Physicians                         â”‚
â”‚    9920 S. Pennsylvania Avenue, Oklahoma City, OK   â”‚
â”‚                                                      â”‚
â”‚  Each provider will receive a separate HIPAA        â”‚
â”‚  authorization form.                                 â”‚
â”‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ Cancel           â”‚  â”‚ Generate         â”‚       â”‚
â”‚  â”‚                  â”‚  â”‚ Documents        â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Specifications:**
- **Provider List:** Show name and address for confirmation
- **Checkmarks:** Visual confirmation of selection
- **Explanation:** Brief text explaining what will happen
- **Actions:**
  - Cancel â†’ Close modal, keep selections
  - Generate Documents â†’ Start bulk generation
- **Scrollable:** If > 5 providers, make list scrollable

---

### 5.4 Mobile Responsiveness

#### 5.4.1 Breakpoints

| Device | Width | Layout Changes |
|--------|-------|----------------|
| **Phone** | 320-767px | - Full screen modals<br>- Single column layouts<br>- Larger touch targets (44px min)<br>- Simplified table (scroll or cards) |
| **Tablet** | 768-1023px | - Centered modals (80% width)<br>- 2-column layouts where appropriate<br>- Standard touch targets |
| **Desktop** | 1024px+ | - Centered modals (560px max)<br>- Multi-column layouts<br>- Hover effects enabled |

#### 5.4.2 Touch Interactions

**All Interactive Elements:**
- Minimum size: 44px Ã— 44px (Apple/Android guidelines)
- Spacing: 8px minimum between touch targets
- Feedback: Immediate visual response on tap
- No hover-only features (must work without hover)

**Checkboxes:**
- Mobile: 24px Ã— 24px (larger than desktop 20px)
- Touch area: 44px Ã— 44px (invisible padding)
- Visual feedback: Scale slightly on tap

**Buttons:**
- Mobile: Full width or min 44px height
- Desktop: Auto width with min 120px
- Padding: 12px vertical, 24px horizontal minimum

---

## 6. TECHNICAL REQUIREMENTS

### 6.1 Code Architecture

#### 6.1.1 File Structure
```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ documents/
â”‚   â”‚   â”œâ”€â”€ DocumentGenerationModal.tsx      # Main modal component
â”‚   â”‚   â”œâ”€â”€ DocumentTypeButton.tsx           # Reusable document type button
â”‚   â”‚   â”œâ”€â”€ GeneratingState.tsx              # Loading state component
â”‚   â”‚   â”œâ”€â”€ SuccessState.tsx                 # Success feedback component
â”‚   â”‚   â”œâ”€â”€ ErrorState.tsx                   # Error handling component
â”‚   â”‚   â”œâ”€â”€ BulkSelectionConfirmation.tsx    # HIPAA bulk confirmation
â”‚   â”‚   â””â”€â”€ index.ts                         # Barrel export
â”‚   â”‚
â”‚   â””â”€â”€ medical/
â”‚       â”œâ”€â”€ MedicalProvidersTable.tsx        # Enhanced with checkboxes
â”‚       â””â”€â”€ ProviderCheckbox.tsx             # Reusable checkbox component
â”‚
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useDocumentGeneration.ts             # Document generation logic
â”‚   â”œâ”€â”€ useBulkSelection.ts                  # Bulk selection state management
â”‚   â””â”€â”€ useDocumentValidation.ts             # Pre-generation validation
â”‚
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ documentService.ts                   # n8n API calls
â”‚   â”œâ”€â”€ dataPreparation.ts                   # Format data for templates
â”‚   â””â”€â”€ documentStorage.ts                   # Save to Supabase storage
â”‚
â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ documents.ts                         # Document-related TypeScript interfaces
â”‚   â””â”€â”€ templates.ts                         # Template data interfaces
â”‚
â””â”€â”€ utils/
    â”œâ”€â”€ pdfDownload.ts                       # PDF download helper
    â”œâ”€â”€ dateFormatting.ts                    # Date formatting utilities
    â””â”€â”€ validation.ts                        # Field validation rules
```

---

#### 6.1.2 Component Hierarchy
```
OverviewTab
â”œâ”€â”€ QuickActions
â”‚   â””â”€â”€ GenerateDocumentsButton
â”‚       â””â”€â”€ onClick â†’ Opens DocumentGenerationModal
â”‚
â””â”€â”€ DocumentGenerationModal
    â”œâ”€â”€ DocumentTypeButton (1st Party LOR)
    â”œâ”€â”€ DocumentTypeButton (3rd Party LOR)
    â”œâ”€â”€ DocumentTypeButton (HIPAA)
    â”‚
    â””â”€â”€ onClick any button â†’ 
        â”œâ”€â”€ useDocumentValidation hook
        â”‚   â”œâ”€â”€ If invalid â†’ Show ErrorState
        â”‚   â””â”€â”€ If valid â†’ Show GeneratingState
        â”‚
        â”œâ”€â”€ useDocumentGeneration hook
        â”‚   â”œâ”€â”€ Prepare data (dataPreparation service)
        â”‚   â”œâ”€â”€ Call n8n (documentService)
        â”‚   â”œâ”€â”€ Download PDF (pdfDownload util)
        â”‚   â”œâ”€â”€ Save to storage (documentStorage service)
        â”‚   â””â”€â”€ Create work log
        â”‚
        â””â”€â”€ SuccessState â†’ Auto-close modal

MedicalProvidersTab
â”œâ”€â”€ BulkSelectionToolbar
â”‚   â”œâ”€â”€ GenerateRecordsRequestButton
â”‚   â””â”€â”€ SelectedCount Badge
â”‚
â”œâ”€â”€ MedicalProvidersTable
â”‚   â”œâ”€â”€ HeaderCheckbox (Select All)
â”‚   â””â”€â”€ ProviderRow[]
â”‚       â””â”€â”€ ProviderCheckbox
â”‚
â””â”€â”€ useBulkSelection hook
    â”œâ”€â”€ Manages selected provider IDs
    â”œâ”€â”€ Select all / Deselect all logic
    â””â”€â”€ Provides selectedProviders array
â”‚
â””â”€â”€ BulkSelectionConfirmation Modal
    â”œâ”€â”€ Shows list of selected providers
    â”œâ”€â”€ Confirm â†’ Generate for each provider
    â””â”€â”€ GeneratingState with progress (1 of 3)